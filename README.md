# ES 新特性与 TypeScript、js 性能优化

## 一、请说出下列最终的执行结果，并解释为什么
```
var a = []
for (var i = 0; i < 10; i++) {
	a[i] = function () {
		console.log(i)
	}
}
a[6]()
```
> 输出为 10，i 泄露为全局变量

## 二、请说出下列最终的执行结果，并解释为什么
```
var tmp = 123
if (true) {
  console.log(tmp)
  let tmp
}
```
> Error，不能在 let 还未设置值之前进行调用（块级作用域）

## 三、结合 ES6 新语法，用简单的方式找出数组中的最小值
```
var arr = [12, 34, 32, 89, 4]

const findMin = array =>
	array.reduce((cur, next) => (next < cur ? next : cur), array[0])

console.log(findMin(arr))
```

## 四、请详细说明 var，let，const，三种声明遍历的方式之间的具体差别
- var
  全局作用域，定义变量
- let
  块级作用域，定义变量
- const
  块级作用域，定义常量（须赋值）

## 五、请说出下列代码最终输出的结果，并解释为什么？
```
var a = 10
var obj = {
	a: 20,
	fn() {
		setTimeout(() => {
			console.log(this.a)
		})
	},
}
obj.fn()
```
> 20，this.a 指向 obj.a

## 六、简述`Symbol`类型的用途
表示独一无二的值，用于防止属性名冲突
```
var a = Symbol("a");
var b = Symbol("a");
console.log(a === b); //false
```

## 七、说说什么是浅拷贝，什么是深拷贝
复制一个已有的数据，当修改已有数据时
- 浅拷贝：复制后的数据发生改变
- 深拷贝：复制后的数据无变化

## 八、请简述 TypeScript 与 JavaScript 之间的关系
TypeScript 是静态类型，强类型
JavaScript 是动态类型，弱类型

## 九、请谈谈你所认为的 TypeScript 优缺点
优点
	- 支持任一种 Javascript 开发环境
	- 生态圈
	- 提供了类、模块和借口
	- 代码可读性更好，更好维护
缺点：
	- 学习成本
	- 初期开发成本

## 十、描述引用计数的工作原理和优缺点
用引用计数器来维护每个对象存在的引用值，判断当前引用数是否为0，引用关系改变时修改引用数字，引用数字为0时立即回收

优点
- 即时回收垃圾对象
- 减少程序卡顿时间
缺点
- 无法回收循环引用的对象
- 资源消耗较大

## 十一、描述标记整理算法的工作流程
遍历所有对象，给活动对象进行标记，整理当前地址空间，把没有标记对象清除

## 十二、描述 V8 中新生代存储区垃圾回收的流程
- 回收过程采用复制算法+标记整理
- 新生代内存区分为二个等大小空间
- 使用空间为From，空闲空间为To
- 活动对象存储于From空间
- 标记整理后将活动对象拷贝至To
- From 与 To 交换空间完成释放

## 十三、描述增量标记算法在何时使用及工作原理
增量标记算法在找到第一层可达对象时开始使用
原理：
当找到第一层的可达对象，就可以停下来，让程序继续执行，GC 做二步的标记操作，（执行与标记交替执行），实现垃圾回收和程序执行交替完成
